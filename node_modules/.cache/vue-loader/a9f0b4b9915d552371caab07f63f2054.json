{"remainingRequest":"/root/Apps/Arbitrium/Arbitrium_ControlPanel/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/Apps/Arbitrium/Arbitrium_ControlPanel/src/views/Shell.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/Apps/Arbitrium/Arbitrium_ControlPanel/src/views/Shell.vue","mtime":1609371447803},{"path":"/root/Apps/Arbitrium/Arbitrium_ControlPanel/node_modules/cache-loader/dist/cjs.js","mtime":1608611815941},{"path":"/root/Apps/Arbitrium/Arbitrium_ControlPanel/node_modules/babel-loader/lib/index.js","mtime":1608611816297},{"path":"/root/Apps/Arbitrium/Arbitrium_ControlPanel/node_modules/cache-loader/dist/cjs.js","mtime":1608611815941},{"path":"/root/Apps/Arbitrium/Arbitrium_ControlPanel/node_modules/vue-loader/lib/index.js","mtime":1608611815653}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVUZXJtaW5hbCBmcm9tICd2dWUtdGVybWluYWwtdWknCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiU2hlbGwiLAogICAgY29tcG9uZW50czogewogICAgICAgIFZ1ZVRlcm1pbmFsCiAgICB9LAogICAgcHJvcHM6IFsndXVpZCcsICd0aHJlYWRpZCddLAogICAgbWV0aG9kczogewogICAgICAgIGNsb3NlV2luKCl7CiAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgcnVuU2hlbGwoY21kKXsKICAgICAgICAgIGxldCB0YXNrSW5mbyA9IHt1dWlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMudXVpZCwgY21kLCBUaHJlYWRJRDp0aGlzLiRyb3V0ZS5wYXJhbXMudGhyZWFkaWR9OwogICAgICAgICAgbGV0IFNoZWxsUmVzcCA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZGRUYXNrJywgdGFza0luZm8pOwogICAgICAgICAgcmV0dXJuIFNoZWxsUmVzcDsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldERldmljZXMoKXsKICAgICAgICAgIGxldCBkZXZpY2VzSlNPTiA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXREZXZpY2VzJyk7CiAgICAgICAgICByZXR1cm4gZGV2aWNlc0pTT047CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbkNsaUNvbW1hbmQoZGF0YSwgcmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgaWYgKGRhdGEudGV4dCAhPT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGV2aWNlcygpCiAgICAgICAgICAgICAgICAudGhlbigoKT0+ewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLmNvcmUuZGV2aWNlc0lELmluZGV4T2YodGhpcy4kcm91dGUucGFyYW1zLnV1aWQpPT09LTEpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJsYXkgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBsZXQgZmluYWxDTUQgPSBkYXRhLnRleHQ7CiAgICAgICAgICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLlBTYm9vbCA9PT0gJ3BzJyl7CiAgICAgICAgICAgICAgICAgICAgZmluYWxDTUQgPSAncG93ZXJzaGVsbCAtQyAiJyArIGZpbmFsQ01ELnJlcGxhY2UoLyIvZywgJ1xcIicpICsgJyInOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHJlc3BTaGVsbCA9IGF3YWl0IHRoaXMucnVuU2hlbGwoZmluYWxDTUQpOwogICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwU2hlbGwpOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3JSZWplY3QnKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgCiAgICB9LAogICAgZGF0YTogKCk9Pih7CiAgICAgICAgb3ZlcmxheTogZmFsc2UKICAgIH0pLAogICAgY3JlYXRlZCgpIHsKICAgICAgICBsZXQgaXRlbVN0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRodG9rZW4nKTsKICAgICAgICBjb25zdCBpdGVtU3RySiA9IEpTT04ucGFyc2UoaXRlbVN0cik7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC5hdXRodG9rZW4gPSBpdGVtU3RySi52YWx1ZTsKICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIG92ZXJsYXk6IGZ1bmN0aW9uKHZhbCl7CiAgICAgICAgICAgIGlmICh2YWw9PXRydWUpewogICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIiwgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAp9Cg=="},{"version":3,"sources":["Shell.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Shell.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<v-container>\n\n  <VueTerminal :intro=\"intro\"\n                console-sign=\"user@zombie:~$\"\n                allow-arbitrary\n                height=\"500px\"\n                @command=\"onCliCommand\">\n    </VueTerminal>\n    <v-overlay :value=\"overlay\">\n      <v-card>\n            <v-btn tile color=\"red\" @click=\"closeWin\">\n              <v-icon left>info</v-icon> Device is no longer connected\n            </v-btn>\n      </v-card>\n        \n    </v-overlay>\n\n</v-container>\n</template>\n\n<script>\nimport VueTerminal from 'vue-terminal-ui'\n\nexport default {\n    name: \"Shell\",\n    components: {\n        VueTerminal\n    },\n    props: ['uuid', 'threadid'],\n    methods: {\n        closeWin(){\n            window.close();\n        },\n        async runShell(cmd){\n          let taskInfo = {uuid: this.$route.params.uuid, cmd, ThreadID:this.$route.params.threadid};\n          let ShellResp = await this.$store.dispatch('addTask', taskInfo);\n          return ShellResp;\n        },\n        async getDevices(){\n          let devicesJSON = await this.$store.dispatch('getDevices');\n          return devicesJSON;\n        },\n        async onCliCommand(data, resolve, reject){\n            if (data.text !== undefined){\n                this.getDevices()\n                .then(()=>{\n                    if(this.$store.state.core.devicesID.indexOf(this.$route.params.uuid)===-1){\n                        this.overlay = true;\n                    }\n                })\n                let finalCMD = data.text;\n                if (this.$route.params.PSbool === 'ps'){\n                    finalCMD = 'powershell -C \"' + finalCMD.replace(/\"/g, '\\\\\"') + '\"';\n                }\n                let respShell = await this.runShell(finalCMD);\n                resolve(respShell);\n            }else{\n                reject('ErrorReject');\n            }\n        },\n        \n    },\n    data: ()=>({\n        overlay: false\n    }),\n    created() {\n        let itemStr = localStorage.getItem('authtoken');\n        const itemStrJ = JSON.parse(itemStr);\n        this.$store.state.auth.authtoken = itemStrJ.value;\n    },\n    watch: {\n        overlay: function(val){\n            if (val==true){\n                window.addEventListener(\"keypress\", e => {\n                    e.preventDefault();\n                });\n            }\n        }\n    },\n}\n</script>\n\n<style>\n.cmd_out {\n    white-space: pre-line\n}\n</style>"]}]}