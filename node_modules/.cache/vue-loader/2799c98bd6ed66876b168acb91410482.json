{"remainingRequest":"/home/r00t/Desktop/Arbitrium_ControlPanel/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/r00t/Desktop/Arbitrium_ControlPanel/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/r00t/Desktop/Arbitrium_ControlPanel/src/views/Login.vue","mtime":1608407708879},{"path":"/home/r00t/Desktop/Arbitrium_ControlPanel/node_modules/cache-loader/dist/cjs.js","mtime":1608403031305},{"path":"/home/r00t/Desktop/Arbitrium_ControlPanel/node_modules/babel-loader/lib/index.js","mtime":1608403031565},{"path":"/home/r00t/Desktop/Arbitrium_ControlPanel/node_modules/cache-loader/dist/cjs.js","mtime":1608403031305},{"path":"/home/r00t/Desktop/Arbitrium_ControlPanel/node_modules/vue-loader/lib/index.js","mtime":1608403030785}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiTG9naW4iLAogICAgY29tcG9uZW50czogewogICAgICAgIAogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93UGFzczogZmFsc2UsCiAgICAgICAgICAgIGxvZ2luSW5mbzogewogICAgICAgICAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgICAgICAgICAgcGFzc1dvcmQ6ICIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdvRGFyazogdHJ1ZSwKICAgICAgICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBzbmFja2JhcjogZmFsc2UsCiAgICAgICAgICAgIHNuYWNrYmFyVGV4dDogIkxvZ2luIGZhaWxlZCIKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHNldFdpdGhFeHBpcnkodmFsdWUsIHR0bCl7CiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgY29uc3QgaXRlbSA9IHsKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGV4cGlyeTogbm93LmdldFRpbWUoKSArIHR0bCoxMDAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGl0ZW0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBzaWduSW5WdWUoKXsKICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIGxldCBsb2dpbkF0dGVtcHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2lnbkluIiwgdGhpcy5sb2dpbkluZm8pOwogICAgICAgICAgICBpZiAobG9naW5BdHRlbXB0LmVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChsb2dpbkF0dGVtcHQuZXJyb3IucmVzcG9uc2Uuc3RhdHVzPT09NDAxKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9ICJVc2VybmFtZSBvci9hbmQgcGFzc3dvcmQgaXMgbm90IGNvcnJlY3RlZCI7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9ICJJbnRlcm5hbCBlcnJvciI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGh0b2tlbicsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRXaXRoRXhwaXJ5KGxvZ2luQXR0ZW1wdC5hdXRoVG9rZW4sIDM2MDApCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDp7CiAgICAgICAgZ29EYXJrKCl7CiAgICAgICAgICAgIHRoaXMuJHZ1ZXRpZnkudGhlbWUuZGFyayA9ICF0aGlzLiR2dWV0aWZ5LnRoZW1lLmRhcms7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container full-height fluid>\n        <v-row align=\"center\" justify=\"center\">\n            <v-card width=\"400px\" class=\"mt-5 mx-a\" :loading=\"showLoading\">\n                <v-toolbar color=\"purple darken-2\" dark flat>\n                    <v-toolbar-title>\n                        <strong>Sign In</strong>\n                    </v-toolbar-title>\n                    <v-spacer></v-spacer>\n                </v-toolbar>\n                <v-card-text>\n                    <v-form>\n                        <v-text-field v-model=\"loginInfo.userName\" label=\"Username\" type=\"text\" \n                        prepend-icon=\"mdi-account-circle\"/>\n                        <v-text-field v-model=\"loginInfo.passWord\" label=\"Password\" :type=\"showPass ? 'text' : 'password'\" \n                        prepend-icon=\"mdi-lock\"\n                        :append-icon=\"showPass ? 'mdi-eye' : 'mdi-eye-off'\"\n                        @click:append=\"showPass = ! showPass\"\n                        v-on:keyup.enter=\"signInVue\"\n                        />\n                    </v-form>\n                </v-card-text>\n                <v-divider></v-divider>\n                <v-card-actions>\n                    <v-switch :label=\"`Dark Theme`\" v-model=\"goDark\" color=\"purple darken-2\"></v-switch>\n                    <v-spacer></v-spacer>\n\n                    <v-btn\n                    :disabled=\"showLoading\"\n                    class=\"white--text\"\n                    color=\"purple darken-2\"\n                    v-on:click=\"signInVue\"\n                    >\n                    LOGIN\n                    </v-btn>\n\n                </v-card-actions>\n            </v-card>\n        </v-row>\n\n    <v-snackbar\n      v-model=\"snackbar\"\n    >\n      {{ snackbarText }}\n\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn\n          color=\"pink\"\n          text\n          v-bind=\"attrs\"\n          @click=\"snackbar = false\"\n        >\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n\n\n    </v-container>\n</template>\n\n<script>\n\nexport default {\n    name: \"Login\",\n    components: {\n        \n    },\n    data(){\n        return {\n            showPass: false,\n            loginInfo: {\n                userName: \"\",\n                passWord: \"\"\n            },\n            goDark: true,\n            showLoading: false,\n            snackbar: false,\n            snackbarText: \"Login failed\"\n        }\n    },\n    methods: {\n        setWithExpiry(value, ttl){\n            const now = new Date()\n            const item = {\n                value: value,\n                expiry: now.getTime() + ttl*1000\n            }\n            return JSON.stringify(item)\n        },\n        async signInVue(){\n            this.showLoading = true;\n            let loginAttempt = await this.$store.dispatch(\"signIn\", this.loginInfo);\n            if (loginAttempt.error) {\n                this.showLoading = false;\n                this.snackbar = true;\n                if (loginAttempt.error.response.status===401){\n                    this.snackbarText = \"Username or/and password is not corrected\";\n                }else{\n                    this.snackbarText = \"Internal error\";\n                }\n            }else{\n                localStorage.setItem('authtoken',\n                    this.setWithExpiry(loginAttempt.authToken, 3600)\n                );\n                this.$router.push('/');\n            }\n        }\n    },\n    watch:{\n        goDark(){\n            this.$vuetify.theme.dark = !this.$vuetify.theme.dark;\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}